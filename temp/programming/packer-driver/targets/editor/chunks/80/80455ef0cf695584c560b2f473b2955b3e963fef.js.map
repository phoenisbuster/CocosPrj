{"version":3,"sources":["file:///Users/admin/CocosProjects/flappybird/flappybird-cocos/assets/Scripts/ClientEventManager/ClientEventManager.ts"],"names":["_decorator","ccclass","property","ClientEventManager","on","evt","cb","obj","event_mapping","has","a","get","set","uuid","Map","off","callback","delete","fire","args1","args2","args3","args4","args5","forEach"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBF,U;;oCAGjBG,kB,WADZF,OAAO,CAAC,oBAAD,C,2BAAR,MACaE,kBADb,CAEA;AAGoB,eAAFC,EAAE,CAAsBC,GAAtB,EAAmCC,EAAnC,EAAiDC,GAAjD,EAChB;AACI,cAAI,KAAKC,aAAL,CAAmBC,GAAnB,CAAuBJ,GAAvB,CAAJ,EACA;AACI,gBAAIK,CAAC,GAAG,KAAKF,aAAL,CAAmBG,GAAnB,CAAuBN,GAAvB,CAAR;AACAK,YAAAA,CAAC,CAACE,GAAF,CAAML,GAAG,CAACM,IAAV,EAAeP,EAAf;AACA,iBAAKE,aAAL,CAAmBI,GAAnB,CAAuBP,GAAvB,EAA4BK,CAA5B;AACH,WALD,MAOA;AACI,gBAAIA,CAAC,GAAG,IAAII,GAAJ,EAAR;AACAJ,YAAAA,CAAC,CAACE,GAAF,CAAML,GAAG,CAACM,IAAV,EAAgBP,EAAhB;AACA,iBAAKE,aAAL,CAAmBI,GAAnB,CAAuBP,GAAvB,EAA4BK,CAA5B;AACH;AACJ;;AAEgB,eAAHK,GAAG,CAAsBV,GAAtB,EAAmCW,QAAkB,GAAG,IAAxD,EAA8DT,GAA9D,EACjB;AACI,cAAI,KAAKC,aAAL,CAAmBC,GAAnB,CAAuBJ,GAAvB,CAAJ,EACA;AACI,gBAAIK,CAAC,GAAG,KAAKF,aAAL,CAAmBG,GAAnB,CAAuBN,GAAvB,CAAR;;AACA,gBAAIK,CAAC,CAACD,GAAF,CAAMF,GAAG,CAACM,IAAV,CAAJ,EACA;AACI,kBAAIG,QAAJ,EAAcN,CAAC,CAACO,MAAF,CAASV,GAAG,CAACM,IAAb;AACjB;;AACD,iBAAKL,aAAL,CAAmBI,GAAnB,CAAuBP,GAAvB,EAA4BK,CAA5B;AACH;AACJ;;AAEiB,eAAJQ,IAAI,CAACb,GAAD,EAAcc,KAAK,GAAG,IAAtB,EAA4BC,KAAK,GAAG,IAApC,EAA0CC,KAAK,GAAG,IAAlD,EAAwDC,KAAK,GAAG,IAAhE,EAAsEC,KAAK,GAAG,IAA9E,EAClB;AACI,cAAI,KAAKf,aAAL,CAAmBC,GAAnB,CAAuBJ,GAAvB,CAAJ,EACA;AACI,iBAAKG,aAAL,CAAmBG,GAAnB,CAAuBN,GAAvB,EAA4BmB,OAA5B,CAAoClB,EAAE,IACtC;AACI,kBAAGA,EAAH,EAAOA,EAAE,CAACa,KAAD,EAAQC,KAAR,EAAeC,KAAf,EAAsBC,KAAtB,EAA6BC,KAA7B,CAAF;AACV,aAHD;AAIH;AACJ;;AAzCL,O,UACmBf,a,GAAoD,IAAIM,GAAJ,E","sourcesContent":["import { _decorator, Component, Node } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('ClientEventManager')\nexport class ClientEventManager \n{\n    private static event_mapping: Map<string, Map<string, Function>> = new Map<string, Map<string, Function>>();\n\n    public static on<T extends Component>(evt: string, cb: Function, obj: T ) \n    {\n        if (this.event_mapping.has(evt)) \n        {\n            let a = this.event_mapping.get(evt);\n            a.set(obj.uuid,cb);\n            this.event_mapping.set(evt, a);\n        } \n        else \n        {\n            let a = new Map<string, Function>();\n            a.set(obj.uuid, cb);\n            this.event_mapping.set(evt, a);\n        }\n    }\n\n    public static off<T extends Component>(evt: string, callback: Function = null, obj: T) \n    {\n        if (this.event_mapping.has(evt)) \n        {\n            let a = this.event_mapping.get(evt);\n            if (a.has(obj.uuid)) \n            {\n                if (callback) a.delete(obj.uuid);\n            }\n            this.event_mapping.set(evt, a);\n        }\n    }\n\n    public static fire(evt: string, args1 = null, args2 = null, args3 = null, args4 = null, args5 = null)\n    {\n        if (this.event_mapping.has(evt)) \n        {\n            this.event_mapping.get(evt).forEach(cb => \n            {\n                if(cb) cb(args1, args2, args3, args4, args5);\n            });\n        }\n    }\n}\n\n"]}